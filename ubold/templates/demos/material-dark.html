{% extends "vertical_base.html" %} 
{% load static i18n %} 
{% block head_title%}
{% trans "Material Dark" %}
{% endblock head_title %} 

{% block body_extra %}
    {% with dark=True %}
        {{ block.super }}
    {% endwith%}
{% endblock body_extra%}

{% block css_wrapper %}
    {% with demo="material" %}
        {{ block.super }}
    {% endwith%}
{% endblock css_wrapper%}

{% block extra_css %}

<!-- third party css -->
<link
  href="{% static 'libs/flatpickr/flatpickr.min.css' %}"
  rel="stylesheet"
  type="text/css"
/>
<link
  href="{% static 'libs/selectize/css/selectize.bootstrap3.css' %}"
  rel="stylesheet"
  type="text/css"
/>
<!-- third party css end -->

{% endblock %}
 {% block content %}

<!-- Start Content-->
<div class="container-fluid">
  <!-- start page title -->
  <div class="row">
    <div class="col-12">
      <div class="page-title-box">
        <div class="page-title-right">
          <form class="d-flex align-items-center mb-3">
            <div class="input-group input-group-sm">
              <input
                type="text"
                class="form-control border"
                id="dash-daterange"
              />
              <span class="input-group-text bg-blue border-blue text-white">
                <i class="mdi mdi-calendar-range"></i>
              </span>
            </div>
            <a href="javascript: void(0);" class="btn btn-blue btn-sm ms-2">
              <i class="mdi mdi-autorenew"></i>
            </a>
            <a href="javascript: void(0);" class="btn btn-blue btn-sm ms-1">
              <i class="mdi mdi-filter-variant"></i>
            </a>
          </form>
        </div>
        <h4 class="page-title">Dashboard</h4>
      </div>
    </div>
  </div>
  <!-- end page title -->

  <div class="row">
    {% for data in statistics %}
    <div class="col-md-6 col-xl-3">
      <div class="widget-rounded-circle card">
        <div class="card-body">
          <div class="row">
            <div class="col-6">
              <div
                class="avatar-lg rounded-circle bg-soft-{{data.color}}  border-{{data.color}}  border"
              >
                <i
                  class="{{data.icon}} font-22 avatar-title text-{{data.color}} "
                ></i>
              </div>
            </div>
            <div class="col-6">
              <div class="text-end">
                <h3 class="text-dark mt-1">
                  {{data.symbolbefore}}<span data-plugin="counterup"
                    >{{data.amount}}</span
                  >{{data.symbolafter}}
                </h3>
                <p class="text-muted mb-1 text-truncate">{{data.name}}</p>
              </div>
            </div>
          </div>
          <!-- end row-->
        </div>
      </div>
      <!-- end widget-rounded-circle-->
    </div>
    <!-- end col-->
    {% endfor %}
  </div>
  <!-- end row-->

  <div class="row">
    <div class="col-lg-4">
      <div class="card">
        <div class="card-body">
          <div class="dropdown float-end">
            <a
              href="#"
              class="dropdown-toggle arrow-none card-drop"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="mdi mdi-dots-vertical"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Sales Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Export Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item">Profit</a>
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item">Action</a>
            </div>
          </div>

          <h4 class="header-title mb-0">Total Revenue</h4>

          <div class="widget-chart text-center" dir="ltr">
            <div
              id="total-revenue"
              class="mt-0"
              data-colors="#f1556c"
              data-amount="{{total_revenue}}"
            ></div>

            <h5 class="text-muted mt-0">Total sales made today</h5>
            <h2>$178</h2>

            <p class="text-muted w-75 mx-auto sp-line-2">
              Traditional heading elements are designed to work best in the meat
              of your page content.
            </p>

            <div class="row mt-3">
              <div class="col-4">
                <p class="text-muted font-15 mb-1 text-truncate">Target</p>
                <h4><i class="fe-arrow-down text-danger me-1"></i>$7.8k</h4>
              </div>
              <div class="col-4">
                <p class="text-muted font-15 mb-1 text-truncate">Last week</p>
                <h4><i class="fe-arrow-up text-success me-1"></i>$1.4k</h4>
              </div>
              <div class="col-4">
                <p class="text-muted font-15 mb-1 text-truncate">Last Month</p>
                <h4><i class="fe-arrow-down text-danger me-1"></i>$15k</h4>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end card -->
    </div>
    <!-- end col-->

    <div class="col-lg-8">
      <div class="card">
        <div class="card-body pb-2">
          <div class="float-end d-none d-md-inline-block">
            <div class="btn-group mb-2">
              <button type="button" class="btn btn-xs btn-light">Today</button>
              <button type="button" class="btn btn-xs btn-light">Weekly</button>
              <button type="button" class="btn btn-xs btn-secondary">
                Monthly
              </button>
            </div>
          </div>

          <h4 class="header-title mb-3">Sales Analytics</h4>

          <div dir="ltr">
            <div
              id="sales-analytics"
              class="mt-4"
              data-colors="#1abc9c,#4a81d4"
            ></div>
          </div>
        </div>
      </div>
      <!-- end card -->
    </div>
    <!-- end col-->
  </div>
  <!-- end row -->

  <div class="row">
    <div class="col-xl-6">
      <div class="card">
        <div class="card-body">
          <div class="dropdown float-end">
            <a
              href="#"
              class="dropdown-toggle arrow-none card-drop"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="mdi mdi-dots-vertical"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Edit Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Export Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item">Action</a>
            </div>
          </div>

          <h4 class="header-title mb-3">Top 5 Users Balances</h4>

          <div class="table-responsive">
            <table
              class="
                table table-borderless table-hover table-nowrap table-centered
                m-0
              "
            >
              <thead class="table-light">
                <tr>
                  <th colspan="2">Profile</th>
                  <th>Currency</th>
                  <th>Balance</th>
                  <th>Reserved in orders</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for recoard in topUsersBalances %}
                <tr>
                  <td style="width: 36px">
                    <img
                      src="{{recoard.avatar}}"
                      alt="contact-img"
                      title="contact-img"
                      class="rounded-circle avatar-sm"
                    />
                  </td>

                  <td>
                    <h5 class="m-0 fw-normal">{{recoard.name}}</h5>
                    <p class="mb-0 text-muted">
                      <small>{{recoard.text}}</small>
                    </p>
                  </td>

                  <td>
                    <i class="mdi {{recoard.currencyIcon}} text-primary"></i>
                    {{recoard.currency_name}}
                  </td>

                  <td>{{recoard.balance}} {{recoard.currency_name}}</td>

                  <td>
                    {{recoard.reservedInOrders}} {{recoard.currency_name}}
                  </td>

                  <td>
                    <a href="javascript: void(0);" class="btn btn-xs btn-light"
                      ><i class="mdi mdi-plus"></i
                    ></a>
                    <a href="javascript: void(0);" class="btn btn-xs btn-danger"
                      ><i class="mdi mdi-minus"></i
                    ></a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <!-- end col -->

    <div class="col-xl-6">
      <div class="card">
        <div class="card-body">
          <div class="dropdown float-end">
            <a
              href="#"
              class="dropdown-toggle arrow-none card-drop"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="mdi mdi-dots-vertical"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Edit Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item"
                >Export Report</a
              >
              <!-- item-->
              <a href="javascript:void(0);" class="dropdown-item">Action</a>
            </div>
          </div>

          <h4 class="header-title mb-3">Revenue History</h4>

          <div class="table-responsive">
            <table
              class="
                table table-borderless table-nowrap table-hover table-centered
                m-0
              "
            >
              <thead class="table-light">
                <tr>
                  <th>Marketplaces</th>
                  <th>Date</th>
                  <th>Payouts</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for recoard in revenueHistory %}
                <tr>
                  <td>
                    <h5 class="m-0 fw-normal">{{recoard.Marketplaces}}</h5>
                  </td>

                  <td>{{recoard.Date}}</td>

                  <td>
                    {{recoard.symbolbefore}}{{recoard.Payouts}}{{recoard.symbolafter}}
                  </td>

                  <td>
                    <span
                      class="badge bg-soft-{{recoard.status.color}} text-{{recoard.status.color}}"
                      >{{recoard.status.name}}</span
                    >
                  </td>

                  <td>
                    <a href="javascript: void(0);" class="btn btn-xs btn-light"
                      ><i class="mdi mdi-pencil"></i
                    ></a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <!-- end .table-responsive-->
        </div>
      </div>
      <!-- end card-->
    </div>
    <!-- end col -->
  </div>
  <!-- end row -->
</div>
<!-- container -->
{% endblock %} {% block extra_javascript %}

<!-- Third party js -->
<script src="{% static 'libs/moment/min/moment.min.js' %}"></script>
<script src="{% static 'libs/flatpickr/flatpickr.min.js' %}"></script>
<script src="{% static 'libs/apexcharts/apexcharts.min.js' %}"></script>
<script src="{% static 'libs/selectize/js/standalone/selectize.min.js' %}"></script>
<!-- Third party js ends -->

<!-- page js -->
<script type="text/javascript">
  // Sales Analytics

  var dataColors;
  var colors = ["#1abc9c", "#4a81d4"];
  (dataColors = $("#sales-analytics").data("colors")) &&
    (colors = dataColors.split(","));

  var chartData = JSON.parse("{{salesAnalytics|escapejs}}");
  var labels = Object.keys(chartData);
  var vals = Object.values(chartData);
  var revenueArray = vals.map(function (el) {
    return el.revenue;
  });
  var salesArray = vals.map(function (el) {
    return el.sales;
  });

  var chart;
  var options = {
    series: [
      {
        name: "Revenue",
        type: "column",
        data: revenueArray,
      },
      {
        name: "Sales",
        type: "line",
        data: salesArray,
      },
    ],
    chart: { height: 378, type: "line", offsetY: 10 },
    stroke: { width: [2, 3] },
    plotOptions: { bar: { columnWidth: "50%" } },
    colors: colors,
    dataLabels: { enabled: !0, enabledOnSeries: [1] },
    labels: labels,
    xaxis: {
      type: "datetime",
      tooltip: {
        enabled: !0,
      },
      labels: {
        formatter: function (value, timestamp, opts) {
          return moment(timestamp).format("D MMM");
        },
      },
    },
    legend: { offsetY: 7 },
    grid: { padding: { bottom: 20 } },
    fill: {
      type: "gradient",
      gradient: {
        shade: "light",
        type: "horizontal",
        shadeIntensity: 0.25,
        gradientToColors: void 0,
        inverseColors: !0,
        opacityFrom: 0.75,
        opacityTo: 0.75,
        stops: [0, 0, 0],
      },
    },
    yaxis: [
      { title: { text: "Net Revenue" } },
      { opposite: !0, title: { text: "Number of Sales" } },
    ],
  };
  var chart = new ApexCharts(
    document.querySelector("#sales-analytics"),
    options
  );
  chart.render();
</script>
<!-- end page js -->

<!-- Dashboard init -->
<script src="{% static 'js/pages/dashboard-1.init.js' %}"></script>
<!-- end demo js-->

{% endblock %}
